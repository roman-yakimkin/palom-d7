<?php

class FacetapiWidgetCurrencyLinks extends FacetapiWidgetCheckboxLinks {

  public function init() {
    parent::init(); // TODO: Change the autogenerated stub
    drupal_add_library('system', 'jquery.cookie');
    drupal_add_js(drupal_get_path('module', 'palom_search_api') . '/palom_search_api.js');
  }

  public function execute() {
    $element = &$this->build[$this->facet['field alias']];

    // Sets each item's theme hook, builds item list.
    $this->setThemeHooks($element);
    $element = [
      '#theme' => 'palom_search_api_currency_facet',
      '#items' => $this->buildListItems($element),
      '#attributes' => $this->build['#attributes'],
    ];
  }

  function buildListItems($build) {
    $result = parent::buildListItems($build);

    $i = 0;
    foreach($build as $key => $value){
      $result[$i]['class'][] = strtolower(substr($key,0,3));
      $i++;
    }
    return $result;
  }


}